# 一、主題說明&動機

人的身體是敏感的，一點生活習慣的變化都可能會對健康造成影響。現代人大多運動較少，也有睡眠及壓力大等困擾，不外乎跟不良生活習慣有關。而由心率每15秒回報一次可得知運動期間使用者準確運動情形及睡眠期間對應睡眠品質的關係。

於是我們決定以心率為主軸，依據使用者每日的生活習慣(EX:運動量、主要運動時間)結合壓力、睡眠品質的數據進行分析

# 二、過去相關研究

國外一項研究指出心率長期低於50次/分或超過80次/分都會使死亡率增高，國內的大規模樣本調查也發現，心率過快的人壽命比一般人要短。相比之下，心跳60次/分的人壽命高於70次/分的人，而心跳70次/分的人壽命又高於80次/分的人。

另一個美國運動醫學會研究指出，健康成人的有效運動心率為最大心跳率的60%～85%之間，而最大心跳率為220減去實際年齡。舉一個50歲成人為例，最大心跳率為220-50（實際年齡）=170，而有效運動心率則在102（170×60%）～136（170×80%）下之間。

# 三、資料處理

## dailies

1. 清除完全重複的數值

2. 將時間戳記轉換成datetime，再把日期和時間分開

3. 清除[averageStressLevel] 為負值的資料

4. 清除手環重複同步的資料，**每個人同一天有不同筆資料(summaryId)**

* 由於需要的是一天中紀錄最完整的資料，所以以id為主，對[durationInSeconds]sort(這樣便會是由小到大的狀態)，再對個人[id]同一天[datetime]做篩選，如有重複只留下排在後面的。

### =>處理完後有513筆資料

## dailies_heartrate

1. 將三個dailies_heartrate資料合併

2. 將dailies和dailies_heartrate裡面**可相互串聯的資料用[summaryId]挑出**
    
3. 用**[summaryId]** 將dailies的[secondIntime]串聯 dailies_heartrate

### =>dailies_heartrate剩下140萬筆資料；dailies剩下300多筆資料

## 挑出白天活動的時段

* 首先把dailies_heartrate的資料做整理，得出每個時間點的心率資料量，再畫出一條平均線。

![image](https://github.com/jason-28/Learning-Note/blob/main/img/%E5%B9%B3%E5%9D%87%E5%BF%83%E7%8E%87.jpg)

* 可看出早上7點到晚上8點是資料量比較足夠的時段，由此可知多數人回家後或睡前就沒有配戴手環。所以抓出早上7點到晚上8點這時段的資料作為白天活動的心率。

* 以一天3000筆以上為主(在13個小時以內抓30分鐘(佔整體3.8%時間)為容錯範圍，接受因裝置或配戴問題造成的資料缺失)，即白天累積資料要達到12.5個以上才會採用。

## sleeps

* 採用資料內的[enhanced final]部分去抓取包含[remsleep]的數值。

* 清除資料內的重複值並查看是否有遺失值。

* 主要以[remsleep]及其他非[remsleep]的睡眠品質各自持續的時間來跟dailies、dailies_heartrate進行整合。

# 四、分析結果

## 每日平均壓力與心率

![image](https://github.com/jason-28/Learning-Note/blob/main/img/%E5%B9%B3%E5%9D%87%E5%A3%93%E5%8A%9B%E8%88%87%E5%BF%83%E7%8E%87.jpg)

* 可看出大學生的平均心率跟平均壓力指數有高度正相關，符合一般人的正常心跳以及壓力比

## 最大壓力指數與最大心率

![image](https://github.com/jason-28/Learning-Note/blob/main/img/%E6%9C%80%E5%A4%A7%E5%A3%93%E5%8A%9B%E6%8C%87%E6%95%B8%E8%88%87%E6%9C%80%E5%A4%A7%E5%BF%83%E7%8E%87.jpg)

* 最大壓力指數與最大心率也有高度相關，但可以看到左下角有個比正常靜止時的心率高且壓力較低的點，推測是有做瑜珈或其他令人放鬆的運動。

## 一天之中有效運動與壓力

![image](https://github.com/jason-28/Learning-Note/blob/main/img/%E4%B8%80%E5%A4%A9%E4%B9%8B%E4%B8%AD%E6%9C%89%E6%95%88%E9%81%8B%E5%8B%95%E8%88%87%E5%A3%93%E5%8A%9B.jpg)

* 由此可知[effect_sport]的發生次數跟平均心率有正向關係。也能證明前面定義的有效運動時間是具參考性的。

## 壓力與運動

![image](https://github.com/jason-28/Learning-Note/blob/main/img/%E5%A3%93%E5%8A%9B%E8%88%87%E9%81%8B%E5%8B%95.jpg)

* 上圖是以當天運動習慣與有效運動持續時間的平均值依dailies當天壓力做分類，可看出過度運動會對身體造成一定程度的壓力，即運動時間太長或運動強度太高都會造成壓力上升。

**effect_sport：** 在一天內持續有效運動的秒數。

**effect_sport_am:** 早上有效運動的持續秒數。

**effect_sport_pm:** 下午有效運動的持續秒數。
    
**over_sport:** 過度運動的持續秒數。

## 壓力與睡眠品質

* 睡眠主要可分成兩個階段:快速動眼期和非快速動眼期，快速動眼期主要是對於腦的修復，記憶好壞跟這個階段的睡眠有重大關係，作夢也是在這個階段產生的。非快速動眼期則是對身體的疲勞與基因修復。

* 一般人睡眠是先從淺層睡眠到深層睡眠再回到淺層，最後才是快速動眼期與淺層睡眠交替，所以我們認為好的睡眠品質必須是兩者兼顧，才真正代表完整的睡眠。

![image](https://github.com/jason-28/Learning-Note/blob/main/img/%E5%BF%AB%E9%80%9F%E5%8B%95%E7%9C%BC%E6%9C%9F%E8%88%87%E5%A3%93%E5%8A%9B1.jpg)

![image](https://github.com/jason-28/Learning-Note/blob/main/img/%E5%BF%AB%E9%80%9F%E5%8B%95%E7%9C%BC%E6%9C%9F%E8%88%87%E5%A3%93%E5%8A%9B2.jpg)

* 由上兩圖可得知快速動眼期與壓力呈現些微負相關，即是壓力越大時，快速動眼期會較少，反之基本睡眠時間會增加，不過因樣本較少，不確定是否有其他因素干擾結果。

# 五、結論

* 由dailies的資料可分析出若處於較激烈的運動狀態或過度運動時，壓力指數也會因應提升，若做些靜止或舒緩身體的運動時壓力可能會下降。

* 睡眠品質的部分可發現到若白天平均壓力較高時，快速動眼期是微微下降，而非快速動眼期則提升，推測是因身體感到疲乏引發非快速動眼期為了減少疲憊感而增加。
